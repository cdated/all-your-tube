<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="expires" content="-1">

    <title>All Your Tube - Video Downloader</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>

<body>
    <div class="main-container">
        <!-- Header -->
        <header class="main-header">
            <div class="header-banner">
                <h1 class="header-title">
                    ▶ ALL YOUR TUBE ◀
                </h1>
                <div class="header-subtitle">
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <div class="main-form-card">
                <!-- Pixel art decorative border -->
                <div class="form-inner">
                    <form id="downloadForm" method="POST" action="{{url_prefix}}/save" class="needs-validation"
                        novalidate>
                        <div class="form-group">
                            <label for="url" class="form-label">
                                ▼ VIDEO URL ▼
                            </label>
                            <input type="url" id="url" name="url" placeholder="https://www.youtube.com/watch?v=..."
                                required class="form-input">
                            <div class="invalid-feedback error-text">
                                ✗ INVALID URL FORMAT!
                            </div>
                            <div class="help-text">
                                ★ SUPPORTS: YouTube, Vimeo & More! ★
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="directory" class="form-label">
                                ▼ FOLDER NAME ▼
                                <span class="optional-badge">[OPTIONAL]</span>
                            </label>
                            <input type="text" id="directory" name="directory"
                                placeholder="Music/Artists or Educational/Science" class="form-input">
                            <div class="help-text-green">
                                ♦ ORGANIZE YOUR DOWNLOADS! ♦
                            </div>
                        </div>

                        <div class="submit-button-container">
                            <button type="submit" class="submit-button">
                                ▶ START DOWNLOAD ◀
                            </button>
                            <button type="button" id="queueDownloadBtn" class="submit-button submit-button-queue">
                                <span>▼</span>
                                <span>CREATE DOWNLOAD LINK</span>
                                <span>▼</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </main>


        <!-- Queue Status Section -->
        <section id="queueSection" class="logging-section" style="display: none;">
            <div class="logging-card">
                <div class="log-header-bar">
                    <div class="log-header">
                        <h2 class="log-title">
                            ◆ DOWNLOAD QUEUE ◆
                        </h2>
                        <button id="hideQueue" class="log-button log-button-red">
                            ✖ CLOSE ✖
                        </button>
                    </div>
                </div>
                <div class="log-controls">
                    <button id="refreshQueue" class="log-button log-button-green">
                        REFRESH
                    </button>
                    <button id="showAllQueue" class="log-button log-button-orange">
                        SHOW ALL
                    </button>
                </div>
                <div id="queueContent" class="log-terminal">
                    <div class="queue-container">
                        <!-- Queue items will be populated here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Logging Section -->
        <section id="loggingSection" class="logging-section">
            <div class="logging-card">
                <!-- Pixel art header -->
                <div class="log-header-bar">
                    <div class="log-header">
                        <h2 class="log-title">
                            ◆ DOWNLOAD PROGRESS ◆
                        </h2>
                        <span id="connectionStatus" class="connection-status">
                            ● READY
                        </span>
                    </div>
                </div>

                <!-- Control buttons -->
                <div class="log-controls">
                    <button id="toggleAutoScroll" class="log-button log-button-green">
                        ▲ AUTO-SCROLL ▲
                    </button>
                    <button id="scrollToTop" class="log-button log-button-orange">
                        ▲ TOP ▲
                    </button>
                    <button id="scrollToBottom" class="log-button log-button-orange">
                        ▼ BOTTOM ▼
                    </button>
                    <button id="hideLogging" class="log-button log-button-red">
                        ✖ CLOSE ✖
                    </button>
                </div>

                <!-- Status display -->
                <div class="status-container status-display">
                    <div class="status-text">
                        ► <span id="desc">SYSTEM INITIALIZING...</span>
                    </div>
                </div>

                <!-- Log terminal -->
                <div id="logs" class="log-terminal">
                    <pre id="output" class="log-output">
                    </pre>
                    <!-- Pixel scanlines -->
                    <div class="scanlines">
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="main-footer">
            <div class="footer-card">
                <div class="footer-text">
                    ◆ POWERED BY YT-DLP ◆ BUILT WITH FLASK ◆
                </div>
            </div>
        </footer>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Pass URL prefix to JavaScript -->
    <script>
        window.URL_PREFIX = '{{url_prefix}}';
    </script>

    <!-- Main JavaScript -->
    <!-- Form Validation and Download Management -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>

</html>
